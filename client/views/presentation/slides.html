<template name="slide_deck">
	<style>

		/*slide components*/

		.tool-background{
			background: rgba(5,5,5,0.15);
			color: rgba(250,250,250,0.35);
		}

		.tool-background:hover{
			background: rgba(255,255,255,0.95);
			color: rgba(0,0,0,0.75);
		}

		.tool-set{
			width: 25%;
			position: absolute;
			top: 5px;
			left: 5px;
			right: 5px;
			z-index: 1;
			padding: 5px;
			background: rgba(0,0,0,0.75);
			color: rgba(250,250,250,0.9);
			z-index: 1;
		}

		.edit-field{
		}

		.slide-window{
			width: 100%;
			height: 100%;
		}

		.background-image{
			width: 100%;
			height: 100%;
			position: absolute;
		}

		/*Slide deck*/

		.slide-deck{
			width: 100%;
			min-height: 100%
		}
		
		.slide-deck-title{
			width: 100%;
			padding: 1px;
			margin-bottom: 25px;
		}

		/*Slide screen*/

		.fullscreen {
			width: 100%;
			height: 100%;
			top:0;
			left: 0;
			position: fixed;
		}

		.fullscreen .current-page{
			background: rgba(5,5,5,0.5);
			color: rgba(250,250,250,0.5);

			position: absolute;
			bottom: 10px;
			left: 10px;
			z-index: 1;
			padding: 10px;
		}

		.fullscreen .edit-field{
			background: none;
			font: inherit;
			border: inherit;
			text-align: inherit;
			color: inherit;
			display: initial;
			height: 100%;
			padding: 0px;
			box-shadow: none;
			-moz-box-shadow: none;
			-o-box-shadow: none;
			-webkit-box-shadow: none;
		}

		.fullscreen .slide-window{
			height: 100%;
			margin-bottom: 10px;
			height: 120px;
		}

		.fullscreen .go-back{
			position: absolute;
			top: 5px;
			right: 98px;
			height: 43px;
			padding: 10px 13px;
			z-index: 1;
		}

		.fullscreen .edit-toggle{
			position: absolute;
			top: 5px;
			right: 52px;
			height: 43px;
			padding: 10px 13px;
			z-index: 1;
		}

		.fullscreen .maximize{
			position: absolute;
			top: 5px;
			right: 5px;
			height: 43px;
			padding: 10px 13px;
			z-index: 1;
		}

		/*Slide preview*/

		.slide-preview{
			position: absolute;
			top: 5px;
			left: 5px;
			right: 5px;
			bottom: 5px;
		}

		.slide-preview .slide-name{
			position: absolute;
			top: 5px;
			left: 52px;
			right: 5px;
			padding: 8px;
			overflow: hidden;
		}

		.slide-preview .add-slide-btn{
			position: absolute;
			width: 60px;
			height: 60px;
			z-index: 2;
			top: 50%;
			left: 50%;
			margin: -30px 0 0 -30px;
			font-size: 45px;
			padding-left: 10px;
		}

		.slide-preview .tool-background{
			background: rgba(5,5,5,0.5);
			color: rgba(250,250,250,0.95);
		}

		.slide-preview .tool-background:hover{
			background: rgba(255,255,255,0.75);
			color: rgba(0,0,0,0.75);
		}

		.slide-preview .tool-background .edit-field{
			background: none;
			font: inherit;
			border: inherit;
			text-align: inherit;
			color: inherit;
			display: initial;
			height: 100%;
			padding: 0px;
			box-shadow: none;
			-moz-box-shadow: none;
			-o-box-shadow: none;
			-webkit-box-shadow: none;
		}

		.slide-preview .dropbox{
			background-color: rgba(0,0,0,0.3);
			color: rgba(250,250,250,0.95)
		}

		.slide-preview .dropbox:hover{
			background-color: rgba(0,0,0,0.75);
			color: rgba(250,250,250,0.75)
		}

		.slide-preview .dropbox label{
			font-weight: 400;
		}

		.slide-preview .dropbox.has-advanced-upload {
			outline-color: rgba(250,250,250, 0.75);
		}

		.slide-preview .tool-set{
			left: 0px;
			width: 100%;
		}

		.slide-preview .edit-toggle{
			position: absolute;
			top: 5px;
			left: 5px;
			height: 43px;
			padding: 10px 13px;
			z-index: 2;
		}

		.slide-preview .maximize{
			position: absolute;
			bottom: 5px;
			right: 5px;
			padding: 10px 13px;
		}

		.add-slide-container{
			background: rgba(0,0,0,0.5);
		}

		/*Slide side bar*/

		.slide-side-bar{
			position: absolute;
			top:0px;
			left:20px;
			width: 120px;
			z-index: 10;
		}

		.slide-side-bar .tool-background{
			background: rgba(5,5,5,0.5);
			color: rgba(250,250,250,0.75);
		}

		.slide-side-bar .tool-background:hover{
			background: rgba(255,255,255,0.95);
			color: rgba(0,0,0,0.75);
		}

		.slide-side-bar .edit-field{
			background: rgba(255,255,255,0.95);
			color: rgba(0,0,0,0.75);
		}

		.slide-side-bar .slide-window{
			margin-bottom: 10px;
			height: 120px;
			position: relative;
		}

		.slide-side-bar .maximize{
			position: absolute;
			bottom: 5px;
			right: 5px;
			padding: 5px 8px;
		}

		/*Slide elements*/

		.names{
			position: absolute;
			left: 60px;
			right: 30%;
			top: 60px;
			font-size: 18px;
			padding: 10px 10px;
			text-align: left;
			background: rgba(0,0,0,0.5);
			color: rgba(250,250,250,0.7);
		}

		.sub-title{
			position: absolute;
			left: 30%;
			right: 20px;
			bottom: 180px;
			font-size: 25px;
			padding: 10px 10px;
			text-align: right;
			background: rgba(0,0,0,0.5);
			color: rgba(250,250,250,0.9);
		}

		.title{
			position: absolute;
			left: 30%;
			right: 20px;
			bottom: 60px;
			font-size: 40px;
			padding: 30px 10px;
			text-align: right;
			background: rgba(0,0,0,0.5);
			color: rgba(250,250,250,0.9);
		}

		.content{
			position: absolute;
			left: 30%;
			right: 20px;
			bottom: 60px;
			padding: 30px 20px;
			background: rgba(0,0,0,0.75);
			color: rgba(250,250,250,0.9);
			font-size: 1.5em;
			font-weight: 300;
		}

		.content.editor{
			font-size: 1em;
		}
	</style>

	{{#unless current_slide}}
		<div class="slide-deck">
			<div class="text-center slide-deck-title">
				<h1>Slides</h1>
			</div>

			<div class="container-fluid">
				<div class="row">
					<div class="col-xs-offset-1 col-xs-10">
						<div class="row">
							{{#each children .}}
								<div class="col-lg-4 col-md-6 col-xs-12">
									<div style="margin-top: 100%;"></div>
									<div class="slide-preview">
										{{>Template.dynamic template=template_id data=.}}

										{{#if _is_editing_response _id}}
											<div class="tool-set">
												{{#_edit_tools}}
													{{>upload method="set_field" collection_name="Slides"
														field="background" item_id=_id box_id="background"}}

													{{>basic_input method="set_field" collection_name="Slides"
														field="background_color" placeholder="HTML Color" item_id=_id}}
												{{/_edit_tools}}
											</div>
										{{/if}}

										{{>_edit_toggle}}

										{{#unless _is_editing_response _id}}
											<div class="slide-name tool-background">
												<div class="row" style="padding-bottom: 13px">
													<div class="col-xs-9">
														{{>basic_input method="set_field" collection_name="Slides"
															field="name" placeholder="Name" item_id=_id}}
													</div>
													<div class="col-xs-3">
														{{>basic_input method="set_field" collection_name="Slides"
															field="index" placeholder="index" item_id=_id type="number"}}
													</div>
												</div>

												<div class="row">
													<div class="col-md-12">
														{{>upload mini=true method="set_field"
																collection_name="Slides" field="background"
																item_id=_id box_id="background"}}
													</div>
												</div>
											</div>
										{{else}}

										{{/unless}}

										<div class="maximize tool-background" id="slide">
											<span class="glyphicon glyphicon-fullscreen"></span>
										</div>
									</div>
								</div>
							{{/each}}

							<div class="col-lg-3 col-md-4 col-xs-6" id="add_slide">
								<div style="margin-top: 100%;"></div>
								<div class="slide-preview add-slide-container">
									<div class="tool-background add-slide-btn">
										<span class="glyphicon glyphicon-plus"></span>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	{{else}}
		{{#unless _is_editing_response current_slide._id}}
			<div class="row slide-side-bar">
				{{#each children .}}
					<div class="slide-window">
						{{>Template.dynamic template=template_id data=.}}

						<div class="maximize tool-background" id="slide">
							<span class="glyphicon glyphicon-fullscreen"></span>
						</div>
					</div>
				{{/each}}
			</div>
		{{/unless}}
	{{/unless}}

	{{#with current_slide}}
		{{#unless _is_fullscreen}}
			{{#if _is_editing_response _id}}
				<div class="tool-set">
					{{#_edit_tools}}
						{{>upload method="set_field" collection_name="Slides"
							field="background" item_id=_id box_id="background"}}

						{{>basic_input method="set_field" collection_name="Slides"
							field="background_color" placeholder="HTML Color" item_id=_id}}

						{{>basic_input method="set_field" collection_name="Slides"
							field="title" placeholder="Title" item_id=_id}}
					{{/_edit_tools}}
				</div>
			{{/if}}
		{{/unless}}

		{{#full_screen}}
			{{#unless _is_fullscreen}}
				<div class="go-back tool-background" id="go_back">
					<span class="glyphicon glyphicon-arrow-up"></span>
				</div>

				{{>_edit_toggle}}
			{{/unless}}

			<div class="current-page">
				{{index}} {{name}}
			</div>

			<div class="slide-window">
				{{>Template.dynamic template=template_id data=.}}
			</div>
		{{/full_screen}}
	{{/with}}
</template>


<template name="slide_base">
	<div class="background-image"
			 style=" {{#if background}}
				background-image: url({{download_field_value "Slides" _id "background" background}});
				background-size: cover;
				background-color: {{background_color}};
				background-blend-mode: multiply;
			{{else}}
				{{#if background_color}}
						background-color: {{background_color}};
					{{else}}
						background-color: rgb(147, 108, 129);
			 	{{/if}}
			{{/if}}">
		{{> UI.contentBlock}}
	</div>
</template>


<template name="slide_title">
	{{#slide_base}}
		<div class="names">
			{{>basic_input method="set_field" collection_name="Slides"
				field="names" placeholder="names" item_id=_id}}
		</div>

		{{#if current}}
			<div class="sub-title">
				{{>basic_input method="set_field" collection_name="Slides"
					field="sub_title" placeholder="Sub Title" item_id=_id}}
			</div>

			<div class="title">
				{{>basic_input method="set_field" collection_name="Slides"
					field="title" placeholder="Title" item_id=_id}}
			</div>
		{{/if}}
	{{/slide_base}}
</template>


<template name="slide_content">
	{{#slide_base}}
		{{#if current}}
			{{#if _is_editing_response _id}}
				<div class="content editor">
					{{>code_input method="set_field" collection_name="Slides"
						field="content" placeholder="Content" item_id=_id}}
				</div>
			{{else}}
				{{{content}}}
			{{/if}}
		{{/if}}
	{{/slide_base}}
</template>


<template name="slide_voting">
	{{#slide_base}}
		{{#if current}}
			{{#if voting}}
				{{#if field}}
					<div class="container-fluid">
						<div class="row">
							<div class="col-sm-offset-1 col-md-offset-2 col-lg-offset-3 col-sm-10 col-md-8 col-lg-6">

								<div style="margin-top: 45px;
														padding: 15px;
														background: rgba(40,120,80,0.5);
														color: rgba(255,255,255,0.9);">
									<h1>Summary</h1>
									<hr>
									{{>voting_summary voting="udk" field="vote"
									values=(array "Interactive Story Telling"
																"Self Determination Theory"
																"Artificial Intelligence")}}
								</div>
							</div>
						</div>
					</div>
				{{/if}}
			{{/if}}
		{{/if}}
	{{/slide_base}}
</template>


<template name="voting_summary">
	<style>
		.value-set {
			min-width: 50px;
			display: inline-block;
			margin-right: 10px;
			font-size: 30px;
			font-weight: 300;
		}

		.value-set .input {
			float: right;
			padding-left: 10px;
		}

		.value-set .slide-link{
			color:rgba(187, 221, 250, 0.9)
		}
	</style>

	<div class="value-set">
		{{#each summary}}
			<div>
				{{#if link}}
					<a class="slide-link" id="url">{{_id}}</a>
				{{else}}
					<label style="font-weight: 300">{{_id}}</label>
				{{/if}}

				<div class="input">{{count}}</div>
			</div>
		{{else}}
			{{>wait}}
		{{/each}}
	</div>
</template>


<template name="full_screen">
	<div class="fullscreen" id="full_screen">
		{{#unless _is_fullscreen}}
			<div class="maximize tool-background" id="make_full_screen">
				<span class="glyphicon glyphicon-fullscreen"></span>
			</div>
		{{/unless}}

		{{> UI.contentBlock}}
	</div>
</template>


<template name="udk">
	<style>
		.bg-d{
			color: rgba(255,255,255,0.9);
			width: 100%;
			border-radius: 0;
			margin-bottom: 15px;
			padding: 35px 15px;
			font-size: 25px;
			font-weight: 300;
		}

		.bg-d:hover{
			color: rgba(5,5,5,0.75);
			box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
		}

		.bg-d:active{
			color: rgba(5,5,5,0.75);
			box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.2), 0 3px 10px 0 rgba(0, 0, 0, 0.19);
		}

		.bg-l{
			background: rgba(0,0,0,0.15);
			color: rgba(255,255,255,0.25);
			padding-top: 30px;
			margin-top: 50px;
			padding-left: 30px;
			padding-right: 20px;
			padding-bottom: 60px;
		}
	</style>

	<div style="background-image: url('/images/bg.jpg');
				background-size: cover;
				width: 100%; height: 100%;">
		<div class="container-fluid">
			<div class="row">
				<div class="col-sm-offset-1 col-md-offset-2 col-lg-offset-3 col-sm-10 col-md-8 col-lg-6">
					{{#unless vote}}
						<div class="bg-l">
							<div id="Interactive Story Telling" class="bg-d option"
									 style="background: rgba(60,160,180,0.75);">Interactive Story Telling</div>
							<div id="Self Determination Theory" class="bg-d option"
									 style="background: rgba(40,120,80,0.75);">Self Determination Theory</div>
							<div id="Artificial Intelligence" class="bg-d option"
									 style="background: rgba(137, 111, 106, 0.75);">Artificial Intelligence</div>
						</div>
					{{else}}
						<div class="bg-l" style="background: rgba(0,0,0,0.5);
																			color: rgba(255,255,255,0.9);">
							<h1>Thank you for casting your vote!</h1>

							<div style="padding: 15px;
													background: rgba(40,120,80,0.5);
													color: rgba(255,255,255,0.9);">
								<h1>Summary</h1>
								<hr>
								{{>voting_summary voting="udk" field="vote" link=false
								values=(array "Interactive Story Telling"
															"Self Determination Theory"
															"Artificial Intelligence")}}
							</div>
						</div>
					{{/unless }}
				</div>
			</div>
		</div>
	</div>
</template>
