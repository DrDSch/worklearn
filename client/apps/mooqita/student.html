<!------------------------------------------------
|
|	Student view
|
-------------------------------------------------->
<template name="student_view">
	{{>review_style}}
	{{#review_layout menu="student_menu" menu_data=.}}
		{{>Template.dynamic template=selected_view data=data}}
	{{/review_layout}}
</template>


<!------------------------------------------------
|
|	Student menu
|
-------------------------------------------------->
<template name="student_menu">
	<div class="container-fluid navigation-background background-theme">
		<div class="row">
			<span>
				<a class="navigation-button student_navigate" id="student_profile">
					Profile
				</a>
			</span>

			<span>
				<a class="navigation-button student_navigate" id="student_find_challenges">
					Find Challenges
				</a>
			</span>

			<span>
				<a class="navigation-button student_navigate" id="student_solutions">
					Solutions <span class="badge background-contrast">0{{new_solution_messages}}</span>
				</a>
			</span>

			<span>
				<a class="navigation-button student_navigate" id="student_reviews">
					Reviews <span class="badge background-contrast">0{{new_review_messages}}</span>
				</a>
			</span>

			<span>
				<a class="navigation-button student_navigate" id="student_credentials">
					Credentials <span class="badge background-contrast">0{{new_credential_messages}}</span>
				</a>
			</span>
		</div>
	</div>
</template>

<!------------------------------------------------
|
|	Student summary
|
-------------------------------------------------->
<template name="student_profile">
	<div class="row">
		<div class="col-md-3">
			<h2>Avatar</h2>
			{{#if avatar}}
				<img class="img-circle img-responsive" src="{{avatar}}">
			{{/if}}
			{{>dropfile method="set_field" collection_name="Responses"
				item_id=_id field="avatar" max_size=250000}}
		</div>

		<div class="col-md-9">
			<h2>Name</h2>
			<div class="row">
				<div class="col-md-4">
					{{>basic_input method="set_field" collection_name="Responses"
						item_id=_id field="given_name" placeholder="Given name"}}
				</div>

				<div class="col-md-4">
					{{>basic_input method="set_field" collection_name="Responses"
						item_id=_id field="middle_name" placeholder="Middle name"}}
				</div>

				<div class="col-md-4">
					{{>basic_input method="set_field" collection_name="Responses"
						item_id=_id field="family_name" placeholder="Family name"}}
				</div>
			</div>

			<h2>Resume</h2>
			{{>text_input method="set_field" collection_name="Responses"
				item_id=_id field="resume" placeholder="Tell us a little more about you."}}
		</div>
	</div>
</template>


<!------------------------------------------------
|
|	Student find challenges
|
-------------------------------------------------->
<template name="student_find_challenges">
	<h1>Find Challenges</h1>

	<div class="embedded-form">
		<div class="input-group">
			<span class="input-group-btn">
				<button class="btn btn-red" id="find_challenge" type="button">
					<span class="glyphicon glyphicon-search"></span>
				</button>
			</span>

			{{>basic_input method="set_field" collection_name="Responses"
				item_id=_id field="query" placeholder="search for ..."}}
		</div>
	</div>

	<div class="well">
		{{#each challenges}}
			{{>student_challenge_preview}}
		{{else}}
			<p>No challenges yet.</p>
		{{/each}}
	</div>
</template>


<template name="student_challenge_preview">
	<div class="input-group">
		<div class="input-group-btn">
			<div class="btn btn-default" id="student_solution">
				<span class="glyphicon glyphicon-fullscreen"></span>
			</div>
		</div>

		<div class="form-control">
			{{title}}
		</div>

		{{#if has_solution}}
			<div class="input-group-btn">
				<div class="btn btn-success" id="delete_response">
					<span class="glyphicon glyphicon-check"></span>
				</div>
			</div>
		{{/if}}
	</div>
</template>

<!------------------------------------------------
|
|	Student solutions
|
-------------------------------------------------->
<template name="student_solutions">
	<h1>Solutions</h1>

	<div class="embedded-form">
		<p>open credits: {{num_credits}}</p>
		<p>open credits summary</p>
		<p>credentials</p>
		<p>new messages</p>
	</div>

	<div class="well">
		{{#each solutions}}
			{{>student_solution_preview}}
		{{else}}
			<p>You have not submitted any solutions yet.</p>
		{{/each}}
	</div>
</template>


<template name="student_solution_preview">
	<div class="input-group">
		<div class="input-group-btn">
			<div class="btn btn-default" id="student_solution">
				<span class="glyphicon glyphicon-fullscreen"></span>
			</div>
		</div>
		<div class="form-control">
			{{challenge.title}}
		</div>
	</div>
</template>


<template name="student_solution">
	<h1>Challenge</h1>
	<div class="well">
		<b>{{challenge.title}}</b>
		<p>{{{challenge.content}}}</p>
	</div>

	<h1>Your Solution</h1>
	<div class="well">
		{{#unless solution}}
			You have not yet submitted a solution to this challenge.
			<div class="btn btn-theme" id="take_challenge">Take challenge</div>
		{{else}}
			<div class="row">
				<div class="form-group col-sm-12">
					{{#unless _is_public}}
						<label>Solution description</label>
						{{>text_input method="set_field" collection_name="Responses"
							item_id=solution._id field="content" placeholder="Describe your solution"}}
						<br>
						<label>Additional Material or a link to your project files</label>
						{{>dropfile method="set_field" collection_name="Responses"
							item_id=solution._id field="material" max_size=250000}}
					{{else}}
						<label>Solution description</label>
						{{content}}
						<br>
						<label>Additional Material or a link to your project files</label>
						{{>file_download collection_name="Responses"
							item_id=solution._id field="material"}}
					{{/unless}}
				</div>
			</div>

			{{#unless _is_public}}
				<div class="alert alert-info">
					Please publish your solution.
					{{#unless _is_saved}}
						You need to save it first.
					{{/unless}}
				</div>
			{{/unless}}

			{{#unless _is_public}}
				<div class="row">
					<div class="form-group col-sm-6">
						<span class="btn-group btn-group-justified">
							<div class="btn btn-theme" id="save">Save</div>
						</span>
					</div>
					<div class="form-group col-sm-6">
						<span class="btn-group btn-group-justified">
							<div class="btn btn-theme" {{publish_disabled}}
									 id="publish">Make public</div>
						</span>
					</div>
				</div>
			{{/unless}}
		{{/unless}}
	</div>

	<h1>Reviews you received</h1>
	<div class="well">
		{{#each feedback}}
			{{>student_review_feedback}}
		{{/each}}
	</div>
</template>


<template name="publish_solution">
	<div class="modal fade">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h1 class="modal-title">Publish solution</h1>
				</div>

				<div class="modal-body">
					<p>
						Are you sure you want to publish your solution?<br>
						If you publish your solution it will be send to <br>
						your colleagues for review. <br>
					</p>

					<p>
						<em>This can not be undone!</em>
					</p>
				</div>

				<div class="modal-footer">
					<button type="button" class="btn btn-red" data-dismiss="modal">Not yet</button>
					<button type="button" class="btn btn-red" id="publish" data-dismiss="modal">Publish</button>
				</div>
			</div>
		</div>
	</div>
</template>


<!------------------------------------------------
|
|	Student reviews
|
-------------------------------------------------->
<template name="student_reviews">
	<h1>Reviews</h1>

	<div class="embedded-form">
		{{#if searching}}
			<div class="btn btn-theme" disabled="true" id="find_review">
				Please wait
				<em><span class="glyphicon glyphicon-refresh spin"></span></em>
			</div>
		{{else}}
			<div class="btn btn-theme" id="find_review">Find me something to review</div>
		{{/if}}
	</div>

	<div class="well">
		{{#each reviews}}
			{{>student_review_preview}}
		{{else}}
			<p>You have not submitted any reviews yet.</p>
		{{/each}}
	</div>
</template>


<template name="student_review_preview">
	<div class="input-group">
		<div class="input-group-btn">
			<div class="btn btn-default" id="student_review">
				<span class="glyphicon glyphicon-fullscreen"></span>
			</div>
		</div>
		<div class="form-control">
			{{challenge.title}}
		</div>
	</div>
</template>


<template name="student_review">
	<h1>Challenge</h1>
	<div class="well">
		<b>{{challenge.title}}</b>
		<p>{{{challenge.content}}}</p>
	</div>

	<h1>Solution</h1>
	<div class="well">
		<label>Solution Description</label>
		{{{solution.content}}}
		<br>
		<label>Additional Material</label>
		{{>file_download collection_name="Responses"
			item_id=solution._id field="material"}}
	</div>

	<h1>Your Review</h1>
	<div class="well">
		<div class="form-group">
			<label>Your Review</label>
			{{#unless _is_public}}
				{{>text_input method="set_field" collection_name="Responses"
					item_id=_id field="content" placeholder="Please provide your feedback here"}}
			{{else}}
				<div class="form-control">
					{{content}}
				</div>
			{{/unless}}
		</div>

		<div class="form-group">
			<label for="quality"
						 title="Your grading of the solution"
							>Rating</label>
			{{#unless _is_public}}
				{{>select_input method="set_field" collection_name="Responses"
						item_id=_id field="rating" options=_rating_options }}
			{{else}}
				<div class="form-control">
					<em>{{rating}}</em>
				</div>
			{{/unless}}
		</div>

		{{#unless rating}}
			<div class="alert alert-danger">
				Please select a grade for this submission.
			</div>
		{{/unless}}

		{{#unless _is_public}}
			<div class="alert alert-info">
				You need to publish your review.
				{{#unless _is_saved}}
					To publish it you need to save
					your review.
				{{/unless}}
			</div>
		{{/unless}}

		{{#unless _is_public}}
			<div class="row">
				<div class="form-group col-sm-6">
					<span class="btn-group btn-group-justified">
						<div class="btn btn-red" id="save">Save</div>
					</span>
				</div>
				<div class="form-group col-sm-6">
					<span class="btn-group btn-group-justified">
						<div class="btn btn-red" {{publish_disabled}}
								 id="publish">Make public</div>
					</span>
				</div>
			</div>
		{{/unless}}
	</div>
</template>


<template name="publish_review">
	<div class="modal fade">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h1 class="modal-title">Publish review</h1>
				</div>

				<div class="modal-body">
					<p>
						Are you sure you want to publish your review?<br>
						If you publish your review it will be send to <br>
						the author of the solution to gather feedback. <br>
					</p>

					<p>
						<em>This can not be undone!</em>
					</p>
				</div>

				<div class="modal-footer">
					<button type="button" class="btn btn-red" data-dismiss="modal">Not yet</button>
					<button type="button" class="btn btn-red" id="publish" data-dismiss="modal">Publish</button>
				</div>
			</div>
		</div>
	</div>
</template>


<!------------------------------------------------
|
|	Feedback editor
|
-------------------------------------------------->
<template name="student_review_feedback">
	<h2>
		{{#if _is_public}}
			Rating <em>{{rating}}</em> of <em>5</em>
		{{else}}
			Please provide feedback to see the rating
		{{/if}}
	</h2>
	<p>
		{{review.content}}
	</p>

	<div class="row">
		{{#unless _is_public}}
			<div class="form-group col-sm-9">
				<div class="form-group">
					<label for="content"
							 title="Your feedback on the review">
						Your Feedback
					</label>

					{{>text_input method="set_field" collection_name="Responses"
						item_id=_id field="content" placeholder="Please give some feedback to the review"}}
				</div>
			</div>
		{{else}}
			<div class="form-group col-sm-12">
				<label for="content"
						 title="Your feedback on the review">
					Your Feedback
				</label>

				<div class="form-control">
					{{content}}
				</div>
			</div>
		{{/unless}}

		{{#unless _is_public}}
			<div class="form-group col-sm-3">
				<label for="quality"
							 title="Your rating of the review"
								>Helpfulness</label>
				{{>select_input method="set_field" collection_name="Responses"
						item_id=_id field="rating" options=_rating_options }}
			</div>
		{{else}}
			<div class="form-group col-sm-12">
				<label for="quality">
					You rated the helpfulness of this review with <em>{{rating}}</em> of <em>5</em>
				</label>
			</div>
		{{/unless}}
	</div>

	{{#unless rating}}
		<div class="alert alert-danger">
			Please rate the helpfulness of this review.
		</div>
	{{/unless}}

	{{#unless _is_public}}
		<div class="alert alert-info">
			Please publish your feedback when you are done.
		</div>
	{{/unless}}

	{{#unless _is_public}}
		<div class="row">
			<div class="form-group col-sm-6">
				<span class="btn-group btn-group-justified">
					<div class="btn btn-red" id="save">Save</div>
				</span>
			</div>

			<div class="form-group col-sm-6">
				<span class="btn-group btn-group-justified">
					<div class="btn btn-red" {{publish_disabled}}
							 id="publish">Make public</div>
				</span>
			</div>
		</div>
	{{/unless}}
</template>


<!------------------------------------------------
|
|	Student credentials
|
-------------------------------------------------->
<template name="student_credentials">
	<h1>Credentials</h1>
	<div class="embedded-form"></div>
	<div class="well"></div>
</template>

