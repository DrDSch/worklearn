<!------------------------------------------------
|
|	Student reviews
|
-------------------------------------------------->
<template name="student_reviews">
	{{#mooqita_wide_spacing}}
		<div class="item">
			<h1>Reviews</h1>

			<p>
				Here you can write reviews for other users.
				Each review you write gives you credits.
				Credits can be used to request reviews for your work.
			</p>

			{{#if searching}}
				<div class="h1">
					Finding review please wait
					<em><span class="glyphicon glyphicon-refresh spin"></span></em>
				</div>
			{{else}}
				<div class="btn-group btn-group-justified">
					<div class="btn btn-theme" id="find_review">Find review</div>
				</div>
			{{/if}}

			{{#each reviews}}
				{{>student_review_preview}}
			{{else}}
				<p>You have not submitted any reviews yet.</p>
			{{/each}}
		</div>
	{{/mooqita_wide_spacing}}
</template>


<template name="student_review_preview">
	<hr>

	<h3>
		<a id="student_review">
			<b><em>{{challenge.title}}</em></b>
		</a>
	</h3>

	<p>
		{{content}}
		{{#if has_more}}
			<a id="select">
				{{#if selected}}
					<em><b>less</b></em>
				{{else}}
					<em><b>...more</b></em>
				{{/if}}
			</a>
		{{/if}}
	</p>
</template>


<template name="student_review">
	<div class="item">
		<h1>{{challenge.title}}</h1>
		{{>more content=challenge.content}}

		<h1>Solution</h1>
		{{solution.content}}

		<h2>Additional Material</h2>
		{{>download collection_name="Responses"
			item_id=solution._id field="material"}}
	</div>

	<div class="item">
		<h1>Your Review</h1>
		{{#unless _is_public}}
			{{>text_input method="set_field" collection_name="Responses"
				item_id=_id field="content" placeholder="Please provide your feedback here"}}
		{{else}}
			<p>
				{{content}}
			</p>
		{{/unless}}

		<div class="form-group">
			<label for="quality"
						 title="Your grading of the solution"
							>Rating</label>
			{{#unless _is_public}}
				{{>select_input method="set_field" collection_name="Responses"
						item_id=_id field="rating" options=_rating_options }}
			{{else}}
				<div class="form-control">
					<em>{{rating}}</em>
				</div>
			{{/unless}}
		</div>

		{{#unless rating}}
			<div class="alert alert-danger">
				Please select a grade for this submission.
			</div>
		{{/unless}}

		{{#unless _is_public}}
			<div class="alert alert-info">
				You need to publish your review.
				{{#unless _is_saved}}
					To publish it you need to save
					your review.
				{{/unless}}
			</div>
		{{/unless}}

		{{#unless _is_public}}
			<div class="row">
				<div class="form-group col-sm-6">
					<span class="btn-group btn-group-justified">
						<div class="btn btn-theme" id="save">Save</div>
					</span>
				</div>
				<div class="form-group col-sm-6">
					<span class="btn-group btn-group-justified">
						<div class="btn btn-theme" {{publish_disabled}}
								 id="publish">Make public</div>
					</span>
				</div>
			</div>
		{{/unless}}
	</div>
</template>


<template name="publish_review">
	<div class="modal fade">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h1 class="modal-title">Publish review</h1>
				</div>

				<div class="modal-body">
					<p>
						Are you sure you want to publish your review?<br>
						If you publish your review it will be send to <br>
						the author of the solution to gather feedback. <br>
					</p>

					<p>
						<em>This can not be undone!</em>
					</p>
				</div>

				<div class="modal-footer">
					<button type="button" class="btn btn-red" data-dismiss="modal">Not yet</button>
					<button type="button" class="btn btn-red" id="publish" data-dismiss="modal">Publish</button>
				</div>
			</div>
		</div>
	</div>
</template>

