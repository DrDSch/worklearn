<!------------------------------------------------
|
|	Student solutions
|
-------------------------------------------------->
<template name="student_solutions">
	{{#mooqita_wide_spacing}}
		{{#unless Template.subscriptionsReady}}
			<h1>
				Please wait we are loading some stuff
				<em><span class="glyphicon glyphicon-refresh spin"></span></em>
			</h1>
		{{else}}
			<div class="item padding-top">
				<h1>Solutions</h1>

				<p>
					This page lists all solutions you wrote.
				</p>

				{{#each solutions}}
					{{>student_solution_preview}}
				{{else}}
					<hr>

					<h2>
						<em>You have not submitted any solutions yet.</em>
					</h2>
				{{/each}}
			</div>
		{{/unless}}
	{{/mooqita_wide_spacing}}
</template>


<!------------------------------------------------
|
|	Student solution preview
|
-------------------------------------------------->
<template name="student_solution_preview">
	<hr>

	<h2>
		<a id="student_solution">
			{{challenge.title}}
		</a>
	</h2>
	{{>more content=challenge.content}}
</template>


<!------------------------------------------------
|
|	Student solution editor
|
-------------------------------------------------->
<template name="student_solution">
	{{#mooqita_wide_spacing}}
		<div class="item padding-top">
			{{#unless Template.subscriptionsReady}}
				<h1>
					Please wait we are loading some stuff
					<em><span class="glyphicon glyphicon-refresh spin"></span></em>
				</h1>
			{{else}}
				{{#unless challenge}}
					<div class="padding-top">
						{{>ER_404}}
					</div>
				{{else}}
					{{#with challenge}}
						<h1>{{title}}</h1>

						{{>more content=content}}

						{{#if material}}
							<h2>
								{{>download collection_name="Challenges"
								item_id=_id field="material"}}
							</h2>
						{{/if}}
					{{/with}}

					{{#each solutions}}
						{{>student_solution_reviews}}
					{{else}}
						<p>
							You have not yet submitted a solution to this challenge.
						</p>

						<div class="text-right">
							<div class="btn btn-theme" id="take_challenge">Take challenge</div>
						</div>
					{{/each}}
				{{/unless}}
			{{/unless}}
		</div>
	{{/mooqita_wide_spacing}}
</template>


<template name="student_solution_reviews">
	{{#unless Template.subscriptionsReady}}
		<h1>
			Please wait we are loading some stuff
			<em><span class="glyphicon glyphicon-refresh spin"></span></em>
		</h1>
	{{else}}
		<h1>Your Solution</h1>

		<div class="alert background-theme">
			Here is a list of things you have to do before your solution is ready:
			<ul>
				{{#unless content}}
					<li>Provide an explanation of your solution under solution description.</li>
				{{/unless}}

				{{#unless material}}
					<li>Add additional material if necessary.</li>
				{{/unless}}

				{{#unless _is_saved "Solutions"}}
					<li>Save your work!</li>
				{{/unless}}

				{{#unless _is_public "Solutions"}}
					<li>Publish your solution (Button below the upload field).</li>
					<li>Request a review (happens automatically when you publish your solution).</li>
				{{/unless}}

				<li>
					Write {{missing_reviews}} reviews for your peers.
					<a href="{{review_link}}">
						<b>Click here to write one.</b>
					</a>
				</li>
				<li>Read the reviews you received and give feedback.</li>
			</ul>
		</div>

		{{#unless _is_public "Solutions"}}
			<h2>Solution description</h2>
			{{>text_input method="set_field" collection_name="Solutions"
				item_id=_id field="content" placeholder="Describe your solution"}}

			<h2>Additional Material</h2>
			{{#if material}}
				<h2>
					{{>download collection_name="Solutions"
						item_id=_id field="material"}}
				</h2>
			{{/if}}

			<h2>
				{{>upload method="set_field" collection_name="Solutions"
					item_id=_id field="material" max_size=2000000}}
			</h2>
		{{else}}
			{{>more content=content}}

			{{#if material}}
				<h2>
					{{>download collection_name="Solutions"
						item_id=_id field="material"}}
				</h2>
			{{/if}}
		{{/unless}}

		{{#unless _is_public "Solutions"}}
			<div class="row padding-top">
				<div class="form-group col-sm-6">
					<span class="btn-group btn-group-justified">
						<a class="btn btn-theme" id="save">Save</a>
					</span>
				</div>
				<div class="form-group col-sm-6">
					<span class="btn-group btn-group-justified">
						<a class="btn btn-theme" {{publish_disabled}}
								 id="publish_solution">Make public</a>
					</span>
				</div>
			</div>
		{{else}}
			<div class="row">
				<div class="form-group col-sm-6">
					<span class="btn-group btn-group-justified">
						<a class="btn btn-theme" {{request_disabled}}
								 id="request_review">Request another review</a>
					</span>
				</div>
			</div>
		{{/unless}}

		{{#if _is_public "Solutions"}}
			<h1>Reviews you received</h1>
			{{#each reviews}}
				{{>student_review_feedback}}
			{{else}}
				<p>No reviews yet.</p>
			{{/each}}
		{{/if}}
	{{/unless}}
</template>


<!------------------------------------------------
|
|	Publish Modal
|
-------------------------------------------------->
<template name="publish_solution">
	<div class="modal fade">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h1 class="modal-title">Publish solution</h1>
				</div>

				<div class="modal-body">
					<p>
						Are you sure you want to publish your solution?<br>
						If you publish your solution it will be send to <br>
						your colleagues for review.<br>
					</p>

					<p>
						<em><b>This can not be undone!</b></em>
					</p>
				</div>

				<div class="modal-footer">
					<div class="btn-group btn-group-justified">
						<a type="button" class="btn btn-theme" data-dismiss="modal">Not yet</a>
						<a type="button" class="btn btn-theme" id="publish" data-dismiss="modal">Publish</a>
					</div>
				</div>
			</div>
		</div>
	</div>
</template>

