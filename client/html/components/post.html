<!-----------------------------------------
|
|  Post entry Template
|
------------------------------------------->
<template name="_post">
	{{#dynamic_template_loader template_id=template data=.}}
		{{#each children .}}
			{{>_post}}
		{{/each}}
	{{/dynamic_template_loader}}
</template>

<template name="_edit_toggle">
	{{#if can_edit_post _id 'editor'}}
		<div class="post_start_edit">
			<div class="post_start_right">
				<div class="ribbon ribbon-theme" id="edit">
					<h1>Edit</h1>
				</div>
			</div>
		</div>
	{{/if}}
</template>

<template name="_edit_tools">
	{{#if is_editing _id}}
		<div class="post-banner" style="padding-right: 20px; padding-left: 20px;">
			<form class="form-horizontal">
				<div class="form-group">
					<div class="col-sm-6">
						{{>select_input label='Template' method='set_field'
							collection_name='Posts' field='template' item_id=_id
							options=templates}}
					</div>

					<div class="col-sm-6">
						{{>select_input label='Visibility' method='set_post_visibility'
							collection_name='Posts'	field='visible_to' item_id=_id
							options=visibility}}
					</div>

					<div class="col-sm-6">
						{{>basic_input label='Group' method='set_field' collection_name='Posts'
								field='post_group' item_id=_id placholder="Enter post group" type="text" }}
					</div>

					<div class="col-sm-6">
						{{>select_input label='Parent' method='set_field' collection_name='Posts'
								field='parent' item_id=_id options=parents}}
					</div>

					<div class="col-sm-6">
						{{>basic_input label='Order' method='set_field' collection_name='Posts'
							field='view_order' item_id=_id placholder="Lower displayed first" type="number" }}
					</div>

					<div class="col-sm-6">
						<div class="input-group">
							<span class="form-control">
								{{#if deleted}}
									Post is deleted.
								{{else}}
									Delete post:
								{{/if}}
							</span>

							<div class="input-group-btn">
								{{#if deleted}}
									<div class="btn btn-danger" id="reinstate_post">
										<i class="glyphicon glyphicon-repeat" aria-hidden="true"></i>
									</div>
								{{else}}
									<div class="btn btn-danger" id="remove_post">
										<i class="glyphicon glyphicon-remove-circle" aria-hidden="true"></i>
									</div>
								{{/if}}
							</div>
						</div>
					</div>
				</div>
			</form>
		</div>
	{{/if}}
</template>

<!-----------------------------------------
|
|  Empty Template
|
------------------------------------------->
<template name="empty">
	{{>_edit_toggle}}

	{{#if is_editing _id}}
		{{>code_input method='set_field' collection_name='Posts' field='abstract' item_id=_id}}
	{{else}}
		{{#if abstract}}
			{{{abstract}}}
		{{else}}
			This post is empty
		{{/if}}
	{{/if}}

	{{>_edit_tools}}
</template>


<!-----------------------------------------
|
|  Peoples Template
|
------------------------------------------->
<template name="team">
	<div>
		{{>_edit_toggle}}

		<div class="text-center padding-bottom">
			<h1 class="logo">
				<em>O</em>ur <em>T</em>eam
			</h1>

			<p>
				Meet the people who make this all possible.
			</p>
		</div>

		{{#if is_editing _id}}
			{{>basic_input method='set_field' collection_name='Posts' field='title'
				placeholder='Title' item_id=_id}}
		{{/if}}

		<div class="row">
			<div class="col-xs-offset-1 col-xs-10">
				<div class="row">
					{{> UI.contentBlock}}
				</div>
			</div>
		</div>

		{{>_edit_tools}}
	</div>
</template>


<!-----------------------------------------
|
|  Person Template
|
------------------------------------------->
<template name="member">
	<div class="col-md-4 col-sm-4 col-ms-6 col-xs-12">
		{{>_edit_toggle}}

		<div class="team-member">
			<img src="{{avatar}}" class="img-responsive img-circle" alt="">
			{{#if is_editing _id}}
				{{>dropfile method='set_field' collection_name='Posts' field='avatar'
					item_id=_id box_id='avatar'}}
			{{/if}}

			<h4>
				{{#if is_editing _id}}
					{{>basic_input method='set_field' collection_name='Posts' field='name'
						placeholder='Name' item_id=_id}}
				{{else}}
					{{name}}
				{{/if}}
			</h4>

			<p class="text-muted">
				{{#if is_editing _id}}
					{{>basic_input method='set_field' collection_name='Posts' field='title'
						placeholder='Title' item_id=_id}}
				{{else}}
					{{title}}
				{{/if}}
			</p>

			<p style="font-size: 14px">
				{{#if is_editing _id}}
					{{>text_input method='set_field' collection_name='Posts' field='resume'
						placeholder='Resume' item_id=_id}}
				{{else}}
					{{resume}}
				{{/if}}
			</p>

			{{>_edit_tools}}
		</div>
	</div>
</template>


 <!-----------------------------------------
|
|  Headline Template
|
------------------------------------------->
<template name="headline">
	<div class="post background-white">
		{{>_edit_toggle}}

		<h1 class="logo">
			{{#if is_editing _id}}
				{{>basic_input method='set_field' collection_name='Posts'
						field='title' item_id=_id placholder="Title" type="text" }}
			{{else}}
				{{#if title}}
					{{{letter}}}
				{{else}}
					This post is empty
				{{/if}}
			{{/if}}
		</h1>

		{{#if is_editing _id}}
			{{>code_input method='set_field' collection_name='Posts' field='abstract' item_id=_id}}
		{{else}}
			{{#if abstract}}
				{{{abstract}}}
			{{else}}
				This post is empty
			{{/if}}
		{{/if}}

		{{>_edit_tools}}
	</div>
</template>

<!-----------------------------------------
|
|  Post Template
|
------------------------------------------->
<template name="post">
	<div class="post background-white">
		{{>_edit_toggle}}

		{{#if figure}}
			<div class="post-banner">
				<img class="img-responsive" src="{{figure}}" alt="{{label}}">
			</div>

			{{#if is_editing _id}}
				<div class="btn-group btn-group-justified">
					<div class="btn btn-contrast" id="remove_figure">
						Remove figure
					</div>
				</div>
			{{/if}}
		{{else}}
			{{#if is_editing _id}}
				<div class="post-banner background-theme">
					<h2>
						{{>basic_input method='set_field' collection_name='Posts' field='title'
							placeholder='Title' item_id=_id}}
					</h2>
				</div>
			{{else}}
				{{#if title}}
					<div class="post-banner background-theme">
						<h2>
							{{{title}}}
						</h2>
					</div>
				{{else}}
				{{/if}}
			{{/if}}
		{{/if}}

		{{#if is_editing _id}}
			{{>dropfile method='set_field' field='figure' item_id=_id box_id='figure'}}
		{{/if}}

		{{#if figure}}
			<h2>
				{{>basic_input method='set_field' collection_name='Posts'
						field='title' item_id=_id placholder="Title" type="text" }}
			</h2>
		{{/if}}

		<div class="row">
			<div class="col-md-12">
				{{#if is_editing _id}}
					{{>code_input method='set_field' collection_name='Posts' field='abstract' item_id=_id}}
				{{else}}
					{{#if abstract}}
						{{{abstract}}}
					{{else}}
						This post is empty
					{{/if}}
				{{/if}}
			</div>
		</div>

		{{>_edit_tools}}
	</div>
</template>


 <!-----------------------------------------
|
|  Publication Template
|
------------------------------------------->
<template name="publication">
	<div class="post background-white">
		{{>_edit_toggle}}

		{{#if is_editing _id}}
			<div class="post-banner background-theme">
				<h2>
					{{>basic_input method='set_field' collection_name='Posts'
					field='title' item_id=_id placholder="Title" type="text" }}
				</h2>
			</div>
		{{else}}
			{{#if title}}
				<div class="post-banner background-theme">
					<h2>
						{{title}}
					</h2>
				</div>
			{{else}}
			{{/if}}
		{{/if}}

		<div class="row">
			<div class="col-md-4">
				{{#if figure}}
					<a href="{{paper_url}}">
						<img class="img-responsive figure-padding" src="{{figure}}" alt="{{label}}">
					</a>

					{{#if is_editing _id}}
						<div class="btn-group btn-group-justified">
							<div class="btn btn-contrast" id="remove_figure">
								Remove figure.
							</div>
						</div>
					{{/if}}
				{{/if}}

				{{#if is_editing _id}}
					{{>dropfile method='set_field' field='figure' item_id=_id box_id='figure'}}
				{{/if}}
			</div>

			<div class="col-md-8">
				<h4 class="double-header">
					<em>
						<i>
							{{#if is_editing _id}}
								{{>basic_input method='set_field' collection_name='Posts'
													field='authors' item_id=_id placholder="Authors" type="text" }}
							{{else}}
								{{#if authors}}
									{{{authors}}}
								{{else}}
									Authors unknown
								{{/if}}
							{{/if}}
						</i>
					</em>
				</h4>

				{{#if is_editing _id}}
					<div class="row">
						<div class="col-md-3">
							<h4>
								{{>basic_input method='set_field' collection_name='Posts'
									field='pub_year' item_id=_id placholder="Publication year" type="text" }}
							</h4>
						</div>

						<div class="col-md-9">
							<h4>
								{{>basic_input method='set_field' collection_name='Posts'
									field='conference' item_id=_id placholder="Publication venue" type="text" }}
							</h4>
						</div>
					</div>
				{{else}}
					<h4>
						{{pub_year}},
						{{conference}}
					</h4>
				{{/if}}

				{{#if is_editing _id}}
					{{>code_input method='set_field' collection_name='Posts' field='abstract' item_id=_id}}
				{{else}}
					{{#if abstract}}
						{{{abstract}}}
					{{else}}
						This post is empty
					{{/if}}
				{{/if}}
			</div>
		</div>

		<div class="post-banner background-theme">
			{{#if paper_url}}
				<div class="btn-group btn-group-justified">
					<a class="btn btn-translucent" id="download_paper" href="{{paper_url}}" target="_blank">
						<h3>Download Paper</h3>
					</a>
				</div>

				{{#if is_editing _id}}
					<div class="btn-group btn-group-justified">
						<div class="btn btn-contrast" id="remove_paper">
							Remove paper.
						</div>
					</div>
				{{/if}}
			{{/if}}

			{{#if is_editing _id}}
				{{>dropfile method='set_field' field='paper' item_id=_id box_id='paper'}}
			{{/if}}
		</div>

		{{>_edit_tools}}
	</div>
</template>
